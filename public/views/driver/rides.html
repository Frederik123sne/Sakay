<!DOCTYPE html>
<html>

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ride Information</title>
  <link rel="stylesheet" href="/views/driver/css/driver.css" />
  <link rel="stylesheet" href="/views/driver/css/large-screen.css" />
  <link rel="stylesheet" href="/views/driver/css/small-screen.css" />
  <link rel="icon" type="image/x-icon" href="/views/assets/Logo.png" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
</head>

<body>
  <!-- SIDE NAVIGATION -->
  <div class="sidebar">
    <div class="logo-container">
      <img src="/views/assets/SAKAY BRAVO LOGO_DARK YELLOW.png" class="app-logo" alt="Logo" />
    </div>

    <a href="/driver/home">Home</a>
    <a class="active" href="/driver/rides">Ride Information</a>
    <a href="/driver/requirements">Requirements</a>
    <a href="/driver/history">History</a>

    <div class="contact">
      <a href="/driver/contact" class="contact">Contact Us</a>
    </div>
  </div>

  <!-- TOP NAVIGATION -->
  <header class="top-nav">
    <div class="nav-left">
      <h1 class="nav-title">Rides</h1>
      <h2 class="sub-title" id="welcomeMessage">Accept a ride request</h2>
    </div>
    <div class="nav-right">
      <div class="icon notification">
        <img src="/views/assets/Notification Icon.png" alt="Notifications" />
      </div>
      <div class="profile-dropdown-container">
        <div class="profile" id="profileBtn">
          <img src="/views/assets/Profile Icon.png" alt="Profile" id="profileIcon" />
        </div>
        <!-- Dropdown Menu -->
        <div class="profile-dropdown" id="profileDropdown">
          <div class="dropdown-header">
            <img src="/views/assets/Profile Icon.png" alt="Profile Picture" class="dropdown-profile-pic"
              id="dropdownProfilePic" />
            <div class="dropdown-user-info">
              <h4 id="userName">Loading...</h4>
              <p id="userEmail">Loading...</p>
              <span class="driver-badge">Driver</span>
            </div>
          </div>
          <div class="dropdown-divider"></div>
          <a href="/driver/profile" class="dropdown-item">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
              <circle cx="12" cy="7" r="4"></circle>
            </svg>
            <span>My Profile</span>
          </a>
          <a href="/driver/rides" class="dropdown-item">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M5 17h14v-4H5v4z"></path>
              <path d="M5 11h4"></path>
              <circle cx="7" cy="17" r="2"></circle>
              <circle cx="17" cy="17" r="2"></circle>
            </svg>
            <span>My Rides</span>
          </a>
          <div class="dropdown-divider"></div>
          <a href="#" class="dropdown-item logout-item" id="logoutBtn">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
              <polyline points="16 17 21 12 16 7"></polyline>
              <line x1="21" y1="12" x2="9" y2="12"></line>
            </svg>
            <span>Log Out</span>
          </a>
        </div>
      </div>
    </div>
  </header>

  <div class="main-content">
    <!-- Seat Picker and Map -->
    <div class="seat-and-map-container">
      <!-- Create Ride Header -->
      <div class="create-ride-header">
        <h3 class="create-ride-title">Select Car Seats</h3>
        <button class="create-ride-btn" onclick="openCreateRidePopup()">
          <span class="plus-icon">+</span>
          <span>Create Ride</span>
        </button>
      </div>

      <div class="active-ride-tab-container">
        <div class="row">
          <div class="column">
            <div class="content">
              <div class="active-ride-card">
                <div class="car-seat-picker">
                  <h1 class="user-prompt">Select a car seat</h1>
                  <ol class="seat-arrangement">
                    <li class="row row--1">
                      <ol class="seats" type="A">
                        <li class="seat">
                          <input type="checkbox" disabled id="1A" />
                          <label for="1A">D</label>
                        </li>

                        <li class="seat">
                          <input type="checkbox" id="1B" />
                          <label for="1B">P1</label>
                        </li>
                      </ol>
                    </li>

                    <li class="row row--2">
                      <ol class="seats" type="A">
                        <li class="seat">
                          <input type="checkbox" id="2A" />
                          <label for="2A">P2</label>
                        </li>

                        <li class="seat">
                          <input type="checkbox" id="2B" />
                          <label for="2B">P3</label>
                        </li>

                        <li class="seat">
                          <input type="checkbox" id="2C" />
                          <label for="2C">P4</label>
                        </li>
                      </ol>
                    </li>
                  </ol>
                </div>
              </div>
            </div>
          </div>

          <div class="map-right">
            <div class="map" id="map"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Filter and Active Rides -->
    <div class="filter-and-table-container">
      <!-- Filters Section -->
      <div class="filters">
        <div class="filter-left">
          <input type="text" class="filter-search-bar" placeholder="Search by name, role, etc..." />
          <button class="button sort-order-button" id="sortOrderBtn">
            <span class="sort-icon">-</span>
            <span class="sort-text">ASCENDING</span>
          </button>
        </div>
      </div>

      <!-- Replace your table in create_ride.html with this -->
      <div class="table-of-rides">

        <table class="rides-information">
          <thead>
            <tr>
              <th>Passenger</th>
              <th>Origin</th>
              <th>Destination</th>
              <th>Seats Available</th>
              <th>Status</th>
              <th>Departure</th>
            </tr>
          </thead>

          <tbody>
            <tr>
              <td colspan="6" style="text-align: center; padding: 40px; color: #7f8c8d">
                <div>Loading rides...</div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="pagination-container">
        <div class="pagination-info">
          Showing <strong>1</strong> to <strong>5</strong> of
          <strong>5</strong> requests
        </div>

        <div class="pagination-buttons">
          <button class="page-btn">&#8249;</button>
          <button class="page-btn active">1</button>
          <button class="page-btn">&#8250;</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Create Ride Popup -->
  <div id="create-ride-popup" class="popup-overlay">
    <div class="popup-container">
      <!-- Left Side - Interactive Map -->
      <div class="popup-left">
        <div id="create-ride-map"></div>
      </div>

      <!-- Right Side - Form and Details -->
      <div class="popup-right">
        <h1 class="details-title">Create New Ride</h1>

        <!-- Map Instruction -->
        <div class="map-instruction">
          <span id="map-instruction-text">Click on map to set starting point</span>
        </div>

        <!-- Route Information Box -->
        <div class="route-info-box">
          <h4>Route Information</h4>

          <div class="route-info-item">
            <span class="route-info-label">Starting Point:</span>
            <span id="start-location" class="route-status status-waiting">Not set</span>
          </div>

          <div class="route-info-item">
            <span class="route-info-label">Destination:</span>
            <span id="end-location" class="route-status status-waiting">Not set</span>
          </div>

          <div class="route-info-item">
            <span class="route-info-label">Distance:</span>
            <span id="route-distance" class="route-info-value">--</span>
          </div>

          <div class="route-info-item">
            <span class="route-info-label">Estimated Duration:</span>
            <span id="route-duration" class="route-info-value">--</span>
          </div>
        </div>

        <!-- Clear Route Button -->
        <button class="clear-route-btn" onclick="clearRoute()" id="clearRouteBtn" style="display: none">
          Clear Route & Start Over
        </button>

        <!-- Trip Details Form -->
        <div class="trip-details">
          <form id="createRideForm">
            <div class="form-group">
              <label>Departure Time:</label>
              <input type="datetime-local" id="departureTime" required />
            </div>

            <!-- Time Display Grid -->
            <div class="time-display-grid" id="timeDisplayGrid" style="display: none">
              <div class="time-display-item">
                <div class="time-display-label">Departure</div>
                <div class="time-display-value" id="displayDepartureTime">
                  --
                </div>
              </div>
              <div class="time-display-item">
                <div class="time-display-label">Estimated Arrival</div>
                <div class="time-display-value highlighted" id="displayArrivalTime">
                  --
                </div>
              </div>
            </div>

            <div class="form-group">
              <label>Available Seats:</label>
              <select id="availableSeats" required>
                <option value="">Select seats</option>
                <option value="1">1 seat</option>
                <option value="2">2 seats</option>
                <option value="3">3 seats</option>
                <option value="4">4 seats</option>
              </select>
            </div>
          </form>
        </div>

        <!-- Action Buttons -->
        <div class="popup-buttons">
          <button class="cancel-btn" onclick="closeCreateRidePopup()">
            CANCEL
          </button>
          <button class="confirm-btn" onclick="submitCreateRide()" id="submitBtn" disabled>
            CREATE RIDE
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Load API Service -->
  <script src="/js/api.js"></script>

  <!-- Load Leaflet -->
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

  <!-- Load Create Ride JavaScript -->
  <script src="/views/driver/js/create_ride.js"></script>
</body>

</html>